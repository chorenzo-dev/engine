# Recipe Content Review

You are a recipe content reviewer responsible for validating that recipe files follow proper content separation guidelines. Your task is to analyze all recipe files and identify content placement violations.

## Recipe File Purpose and Content Rules

### prompt.md - WHAT and WHY (Investigation Only)
This file should ONLY contain:
✅ **Goal**: Clear statement of what the recipe accomplishes (the end goal)
✅ **Investigation**: Steps to discover/detect current state (WHAT to look for)
✅ **Expected Output**: Facts that will be emitted after investigation
✅ **Complete Provides Coverage**: Clear descriptions in Expected Output for EVERY field in metadata.yaml's "provides" section

This file should NOT contain:
❌ **Implementation instructions**: HOW to install, configure, or fix anything
❌ **Code samples**: Actual commands or configuration examples
❌ **Fix procedures**: Steps to achieve the desired state

### fix.md - HOW (Implementation Only)  
This file should ONLY contain:
✅ **Installation steps**: HOW to install required tools/packages
✅ **Configuration instructions**: HOW to set up and configure
✅ **Verification steps**: HOW to verify the setup works
✅ **Base implementation**: Common steps that apply to all variants
✅ **Single-line code samples**: Only when truly universal across all variants

This file should NOT contain:
❌ **Investigation steps**: Discovery or detection logic (belongs in prompt.md)
❌ **Goal statements**: What we're trying to achieve (belongs in prompt.md)
❌ **Variant-specific details**: Implementation specific to one variant
❌ **Multi-line code blocks**: Any code sample longer than 1 line (explain verbally instead)

### variants/*.md - Variant-Specific HOW (Additive Only)
These files should ONLY contain:
✅ **Additional steps**: Extra steps specific to this variant
✅ **Variant configuration**: Settings unique to this tool/approach
✅ **Variant verification**: Testing specific to this variant
✅ **Single-line code samples**: Commands specific to this variant

These files should NOT contain:
❌ **Duplicated content**: Content already in fix.md (should be additive only)
❌ **Investigation logic**: Discovery steps (belongs in prompt.md)
❌ **Base instructions**: Common steps (belongs in fix.md)
❌ **Multi-line code blocks**: Any code sample longer than 1 line (explain verbally instead)

## Files to Review

You are currently in the recipe directory `{{recipePath}}` for recipe `{{recipeName}}`. 

1. Use the LS tool to discover all recipe files (metadata.yaml, prompt.md, fix.md, and any files in variants/)
2. Use the Read tool to examine each file's content
3. **CRITICAL**: Read metadata.yaml first to identify all "provides" fields
4. Verify that prompt.md contains Expected Output descriptions for EVERY provides field
5. Analyze all content according to the rules above

## Content Violations to Identify

### Critical Violations
- **Misplaced How-To**: Implementation instructions in prompt.md
- **Misplaced Investigation**: Discovery/detection logic in fix.md or variant files
- **Content Duplication**: Same instructions repeated in fix.md and variant files
- **Wrong File Purpose**: File contains primarily content meant for another file
- **Multi-line Code Blocks**: Code samples longer than 1 line in fix.md or variant files
- **Missing Provides Coverage**: prompt.md lacks Expected Output descriptions for fields listed in metadata.yaml's "provides" section

### Suggestions to Provide
For each violation, suggest which file the content should be moved to and why.

## Required Output

Return a markdown report with this structure:

```markdown
# Recipe Review: {{recipeName}}

## Status: [PASS/FAIL]

## Summary
- Files reviewed: [number]
- Violations found: [number]
- Critical issues: [brief description if any]

## File Analysis

### prompt.md
[Analysis of content appropriateness]
[Violations found, if any]
[Check: Does Expected Output section cover ALL provides fields from metadata.yaml?]

### fix.md  
[Analysis of content appropriateness]
[Violations found, if any]

### variants/[variant_name].md
[Analysis for each variant file]
[Note any duplication with fix.md]

## Detailed Findings
[For each violation:]
- **File**: [filename]
- **Violation**: [type of violation]
- **Content**: [brief description of problematic content]
- **Suggestion**: Move to [target file] because [reason]

## Recommendations
[Overall suggestions for improving content organization]
```

## Analysis Guidelines

- Focus on content placement, not formatting or structure
- Be specific about what content belongs where
- **Flag any multi-line code blocks in fix.md or variant files as violations**
- Provide actionable suggestions for fixing violations
- Consider the recipe's purpose when evaluating content
- Check for content duplication between fix.md and variants
- Single-line commands are acceptable in fix.md only if universal; variant-specific commands belong in variant files

Please analyze the recipe files and return ONLY the markdown report.